{"version":3,"file":"component---src-pages-game-version-filter-tsx-370e9ec8e07abf41fdab.js","mappings":"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","sources":["webpack://lootvision/./src/components/filter/action.tsx","webpack://lootvision/./src/components/filter/condition.tsx","webpack://lootvision/./src/components/filter/rule.tsx","webpack://lootvision/./src/pages/{Game.version}/filter/[...].tsx"],"sourcesContent":["import React from 'react';\nimport { Action as ActionModel } from '@/lib/data';\n\nexport default function Action({\n  action,\n  config,\n}: {\n  action: ActionModel;\n  config: Config;\n}) {\n  // TODO: implement specific actions based on action type\n  return (\n    <div className=\"flex flex-row\">\n      <div\n        style={{ width: `${config.width}ch` }}\n        className=\"border-b border-neutral-500\"\n      >\n        {action.label}\n      </div>\n      <div className=\"truncate border-b border-neutral-500 pe-2 ps-2\">\n        {action.value}\n      </div>\n    </div>\n  );\n}\n\nexport type Config = {\n  width: number;\n  editable?: boolean;\n};\n","import React from 'react';\nimport { Condition as ConditionModel } from '@/lib/data';\n\nexport default function Condtion({\n  condition,\n  config,\n}: {\n  condition: ConditionModel;\n  config: Config;\n}) {\n  // TODO: implement specific conditions based on condition type\n  return (\n    <div className=\"flex flex-row\">\n      <div\n        style={{ width: `${config.width}ch` }}\n        className=\"border-b border-neutral-500\"\n      >\n        {condition.label}\n      </div>\n      <div className=\"truncate border-b border-neutral-500 pe-2 ps-2\">\n        {condition.value}\n      </div>\n    </div>\n  );\n}\n\nexport type Config = {\n  width: number;\n  editable?: boolean;\n};\n","import React, { useState } from 'react';\nimport { IconButton } from '@/components/widgets';\nimport { Rule as RuleModel } from '@/lib/data';\nimport Action from '@/components/filter/action';\nimport Condition from '@/components/filter/condition';\nimport clsx from 'clsx';\n\nexport default function Rule({ rule }: { rule: RuleModel }) {\n  const [expanded, setExpanded] = useState(false);\n\n  const maxWidth = (values: { label: string }[]) =>\n    values.reduce((max, value) => Math.max(value.label.length, max), 0);\n\n  const maxWidthText = maxWidth([...rule.actions, ...rule.conditions]);\n\n  return (\n    <div className=\"flex w-full flex-col rounded-md border border-neutral-500\">\n      <div\n        className={clsx(\n          'flex w-full flex-row justify-between space-x-3 rounded-t-md bg-neutral-900 px-2 py-2',\n          {\n            'rounded-b-md': !expanded,\n          }\n        )}\n      >\n        <IconButton\n          icon={\n            expanded\n              ? 'mingcute:square-arrow-up-line'\n              : 'mingcute:square-arrow-down-line'\n          }\n          onClick={() => {\n            setExpanded(!expanded);\n          }}\n        />\n        <div className=\"flex-grow font-bold\">{rule.name}</div>\n        <IconButton icon={'mingcute:edit-4-line'} onClick={() => {}} />\n        <IconButton icon=\"mingcute:delete-2-line\" onClick={() => {}} />\n      </div>\n      {expanded && (\n        <div className=\"w-full rounded-b-md bg-neutral-950 px-3 py-2\">\n          <div className=\"mb-2 flex h-28 flex-col items-center justify-center bg-slate-800\">\n            {/* Example of config */}\n            <div>Filter rule preview</div>\n            <div>Coming soon</div>\n          </div>\n          <div className=\"text-gray-400\">Actions</div>\n          <div className=\"flex flex-col space-y-1\">\n            {rule.actions.map((action) => (\n              <Action\n                key={action.id}\n                action={action}\n                config={{ width: maxWidthText }}\n              />\n            ))}\n          </div>\n          <div className=\"mt-4 text-gray-400\">Conditions</div>\n          <div className=\"mb-2 flex flex-col space-y-1\">\n            {rule.conditions.map((condition) => (\n              <Condition\n                key={condition.id}\n                condition={condition}\n                config={{ width: maxWidthText }}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import Rule from '@/components/filter/rule';\nimport Layout from '@/components/layout';\nimport Seo from '@/components/seo';\nimport { Dropdown, IconButton } from '@/components/widgets';\nimport { Filter } from '@/lib/data';\nimport { obtainFilter } from '@/lib/utils';\nimport clsx from 'clsx';\nimport { graphql, navigate } from 'gatsby';\nimport React, { useState } from 'react';\n\nexport default function FilterPage({\n  data,\n  params,\n}: {\n  data: { allPoeMetadata: { nodes: { version: string; league: string }[] } };\n  params: { version: string; '*': string };\n}) {\n  const { version, '*': id } = params;\n  const filter: Filter | null = obtainFilter(version, id);\n  if (!filter) {\n    // TODO: show warning about localStorage data instead\n    navigate('/404', { replace: true });\n    return;\n  }\n  const [selected, setSelected] = useState({\n    index: 0,\n    category: filter.categories[0],\n  });\n\n  const lastIndex = (filter.categories.length ?? 0) - 1;\n\n  return (\n    <Layout>\n      <div className=\"flex h-full flex-col space-y-2\">\n        <div className=\"flex flex-row items-center space-x-4 pe-7 pt-2\">\n          <div className=\"w-44 truncate ps-3 text-lg\">{filter.name}</div>\n          {/* <div className=\"flex flex-row self-end ps-2\">\n            <IconButton\n              icon={\n                false\n                  ? 'mingcute:square-arrow-up-line'\n                  : 'mingcute:square-arrow-down-line'\n              }\n              onClick={() => {\n                // setExpanded(!expanded);\n              }}\n            />\n            <div className=\"ps-3\">all</div>\n          </div> */}\n          <div className=\"flex-grow\" />\n          <Dropdown\n            data={data.allPoeMetadata.nodes.map((v) => ({\n              text: v.league,\n              value: v,\n            }))}\n            onSelected={() => {}}\n          />\n          <IconButton icon=\"mingcute:settings-6-line\" onClick={() => {}} />\n        </div>\n        <div className=\"flex h-full flex-row rounded-md border border-neutral-500\">\n          <div className=\"flex w-44 flex-col\">\n            {filter.categories.map((item, index) => (\n              <div key={item.id} className=\"flex flex-row\">\n                <button\n                  onClick={() => setSelected({ index: index, category: item })}\n                  className={clsx(\n                    'w-full truncate border-b border-r border-neutral-500 px-3 py-4 text-left text-xl',\n                    {\n                      'border-b-0 border-r-0 text-amber-600':\n                        selected.category === item,\n                      'rounded-tr-md border-t': index === selected.index + 1,\n                      'rounded-br-md': index === selected.index - 1,\n                    }\n                  )}\n                >\n                  {item.name}\n                </button>\n              </div>\n            ))}\n            <div\n              className={clsx('flex flex-grow border-r border-neutral-500', {\n                'rounded-tr-md border-t': selected.index === lastIndex,\n              })}\n            />\n          </div>\n          <div className=\"flex h-full w-full\">\n            {selected.category && (\n              <div className=\"flex w-full flex-col space-y-2 px-4 py-2\">\n                {selected.category.rules.map((rule) => (\n                  <Rule rule={rule} key={rule.id} />\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nexport const Head = () => <Seo title=\"\" />;\n\nexport const query = graphql`\n  query ($version: String) {\n    allPoeMetadata(\n      filter: { game_version: { eq: $version } }\n      sort: { version: DESC }\n    ) {\n      nodes {\n        game_version\n        league\n        version\n      }\n    }\n  }\n`;\n"],"names":["Action","action","config","React","className","style","width","label","value","Condtion","condition","Rule","rule","expanded","setExpanded","useState","maxWidthText","actions","conditions","reduce","max","Math","length","clsx","IconButton","icon","onClick","name","map","key","id","Condition","FilterPage","data","params","version","filter","obtainFilter","navigate","replace","selected","setSelected","index","category","categories","lastIndex","Layout","Dropdown","allPoeMetadata","nodes","v","text","league","onSelected","item","rules","Head","Seo","title"],"sourceRoot":""}