{"version":3,"file":"component---src-pages-game-version-filter-tsx-1c1c5a5849cd7fe551ae.js","mappings":"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","sources":["webpack://occamfilter/./src/components/filter/categories.tsx","webpack://occamfilter/./src/components/filter/action.tsx","webpack://occamfilter/./src/components/filter/condition.tsx","webpack://occamfilter/./src/components/filter/rule.tsx","webpack://occamfilter/./src/pages/{Game.version}/filter/[...].tsx"],"sourcesContent":["import { Category } from '@/lib/data';\r\nimport clsx from 'clsx';\r\nimport React, { useState } from 'react';\r\nimport { IconButton } from '../widgets';\r\nimport { Icon } from '@iconify/react';\r\n\r\nexport default function Categories({\r\n  categories,\r\n  onSelected,\r\n  onNewCategory,\r\n}: {\r\n  categories: Category[];\r\n  onSelected: (category: Category) => void;\r\n  onNewCategory: () => void;\r\n}) {\r\n  const [index, setIndex] = useState(0);\r\n  const lastIndex = categories.length - 1;\r\n\r\n  return (\r\n    <div className=\"flex w-[20ch] flex-col\">\r\n      {categories.map((category, idx) => (\r\n        <div key={category.id} className=\"flex flex-row hover:text-amber-500\">\r\n          <button\r\n            onClick={() => {\r\n              setIndex(idx);\r\n              onSelected(category);\r\n            }}\r\n            className={clsx(\r\n              'flex w-full flex-row items-center space-x-2 border-b border-r border-neutral-500 px-3 py-4 text-left text-xl',\r\n              {\r\n                'border-b-0 border-r-0 text-amber-600': idx === index,\r\n                'rounded-tr-md border-t': idx === index + 1,\r\n                'rounded-br-md': idx === index - 1,\r\n              }\r\n            )}\r\n          >\r\n            {category.name}\r\n          </button>\r\n        </div>\r\n      ))}\r\n      <div\r\n        className={clsx(\r\n          'flex w-[20ch] flex-grow border-r border-neutral-500 px-2 pt-8',\r\n          {\r\n            'rounded-tr-md border-t': index === lastIndex,\r\n          }\r\n        )}\r\n      >\r\n        <IconButton\r\n          icon=\"mingcute:file-new-line\"\r\n          text={'New category'}\r\n          onClick={onNewCategory}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Action as ActionModel } from '@/lib/data';\r\n\r\nexport default function Action({\r\n  action,\r\n  config,\r\n}: {\r\n  action: ActionModel;\r\n  config: Config;\r\n}) {\r\n  // TODO: implement specific actions based on action type\r\n  return (\r\n    <div className=\"flex flex-row\">\r\n      <div\r\n        style={{ width: `${config.width}ch` }}\r\n        className=\"border-b border-neutral-500\"\r\n      >\r\n        {action.label}\r\n      </div>\r\n      <div className=\"truncate border-b border-neutral-500 pe-2 ps-2\">\r\n        {action.value}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport type Config = {\r\n  width: number;\r\n  editable?: boolean;\r\n};\r\n","import React from 'react';\r\nimport { Condition as ConditionModel } from '@/lib/data';\r\n\r\nexport default function Condtion({\r\n  condition,\r\n  config,\r\n}: {\r\n  condition: ConditionModel;\r\n  config: Config;\r\n}) {\r\n  // TODO: implement specific conditions based on condition type\r\n  return (\r\n    <div className=\"flex flex-row\">\r\n      <div\r\n        style={{ width: `${config.width}ch` }}\r\n        className=\"border-b border-neutral-500\"\r\n      >\r\n        {condition.label}\r\n      </div>\r\n      <div className=\"truncate border-b border-neutral-500 pe-2 ps-2\">\r\n        {condition.value}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport type Config = {\r\n  width: number;\r\n  editable?: boolean;\r\n};\r\n","import React, { useState } from 'react';\r\nimport { IconButton } from '@/components/widgets';\r\nimport { Rule as RuleModel } from '@/lib/data';\r\nimport Action from '@/components/filter/action';\r\nimport Condition from '@/components/filter/condition';\r\nimport clsx from 'clsx';\r\n\r\nexport default function Rule({ rule }: { rule: RuleModel }) {\r\n  const [expanded, setExpanded] = useState(false);\r\n\r\n  const maxWidth = (values: { label: string }[]) =>\r\n    values.reduce((max, value) => Math.max(value.label.length, max), 0);\r\n\r\n  const maxWidthText = maxWidth([...rule.actions, ...rule.conditions]);\r\n\r\n  return (\r\n    <div className=\"flex w-full flex-col rounded-md border border-neutral-500\">\r\n      <div\r\n        className={clsx(\r\n          'flex w-full flex-row justify-between space-x-3 rounded-t-md bg-neutral-900 px-2 py-2',\r\n          {\r\n            'rounded-b-md': !expanded,\r\n          }\r\n        )}\r\n      >\r\n        <IconButton\r\n          icon={\r\n            expanded\r\n              ? 'mingcute:square-arrow-up-line'\r\n              : 'mingcute:square-arrow-down-line'\r\n          }\r\n          onClick={() => {\r\n            setExpanded(!expanded);\r\n          }}\r\n        />\r\n        <div className=\"flex-grow font-bold\">{rule.name}</div>\r\n        <IconButton icon={'mingcute:edit-4-line'} onClick={() => {}} />\r\n        <IconButton icon=\"mingcute:delete-2-line\" onClick={() => {}} />\r\n      </div>\r\n      {expanded && (\r\n        <div className=\"w-full rounded-b-md bg-neutral-950 px-3 py-2\">\r\n          <div className=\"mb-2 flex h-28 flex-col items-center justify-center bg-slate-800\">\r\n            {/* Example of config */}\r\n            <div>Filter rule preview</div>\r\n            <div>Coming soon</div>\r\n          </div>\r\n          <div className=\"text-gray-400\">Actions</div>\r\n          <div className=\"flex flex-col space-y-1\">\r\n            {rule.actions.map((action) => (\r\n              <Action\r\n                key={action.id}\r\n                action={action}\r\n                config={{ width: maxWidthText }}\r\n              />\r\n            ))}\r\n          </div>\r\n          <div className=\"mt-4 text-gray-400\">Conditions</div>\r\n          <div className=\"mb-2 flex flex-col space-y-1\">\r\n            {rule.conditions.map((condition) => (\r\n              <Condition\r\n                key={condition.id}\r\n                condition={condition}\r\n                config={{ width: maxWidthText }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import Categories from '@/components/filter/categories';\r\nimport Rule from '@/components/filter/rule';\r\nimport Layout from '@/components/layout';\r\nimport Seo from '@/components/seo';\r\nimport { Dropdown, Editable, IconButton } from '@/components/widgets';\r\nimport { Category, Filter } from '@/lib/data';\r\nimport { obtainFilter, saveFilter, uuidv4 } from '@/lib/utils';\r\nimport { graphql } from 'gatsby';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nexport default function FilterPage({\r\n  data,\r\n  params,\r\n}: {\r\n  data: { allPoeMetadata: { nodes: { version: string; league: string }[] } };\r\n  params: { version: string; '*': string };\r\n}) {\r\n  const { version, '*': id } = params;\r\n  const leagues: { name: string; version: string }[] =\r\n    data.allPoeMetadata.nodes.map((v) => ({\r\n      name: v.league,\r\n      version: v.version,\r\n    }));\r\n  const saved: Filter | null = obtainFilter(version, id);\r\n  if (!saved && id) {\r\n    return <FilterNotFound />;\r\n  }\r\n\r\n  const [filter, setFilter] = useState<Filter>(\r\n    saved || {\r\n      game: version,\r\n      gameVersion: leagues[0].version,\r\n      id: uuidv4(),\r\n      name: '',\r\n      lastUpdated: new Date(),\r\n      description: '',\r\n      categories: [],\r\n    }\r\n  );\r\n  const [category, setCategory] = useState<Category | null>(\r\n    filter.categories[0]\r\n  );\r\n\r\n  useEffect(() => {\r\n    // saveFilter(filter);\r\n    console.log('saveFilter: ', filter);\r\n  }, [filter]);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"flex h-full justify-center\">\r\n        <div className=\"flex w-[900px] flex-col space-y-2\">\r\n          <div className=\"flex flex-row items-center space-x-4 pe-7 pt-2\">\r\n            <div className=\"w-44\">\r\n              <Editable\r\n                className=\"truncate ps-3 text-lg\"\r\n                text={filter.name}\r\n                onTextChange={(text) =>\r\n                  setFilter({\r\n                    ...filter,\r\n                    name: text,\r\n                  })\r\n                }\r\n              />\r\n            </div>\r\n            {/* <div className=\"flex flex-row self-end ps-2\">\r\n            <IconButton\r\n              icon={\r\n                false\r\n                  ? 'mingcute:square-arrow-up-line'\r\n                  : 'mingcute:square-arrow-down-line'\r\n              }\r\n              onClick={() => {\r\n                // setExpanded(!expanded);\r\n              }}\r\n            />\r\n            <div className=\"ps-3\">all</div>\r\n          </div> */}\r\n            <div className=\"flex-grow\" />\r\n            <Dropdown\r\n              data={leagues.map((v) => ({\r\n                text: v.name,\r\n                value: v,\r\n              }))}\r\n              onSelected={() => {}}\r\n            />\r\n            <IconButton icon=\"mingcute:settings-6-line\" onClick={() => {}} />\r\n          </div>\r\n          <div className=\"flex h-full flex-row rounded-md border border-neutral-500\">\r\n            <Categories\r\n              categories={filter.categories}\r\n              onSelected={setCategory}\r\n              onNewCategory={() => {\r\n                setFilter({\r\n                  ...filter,\r\n                  categories: [\r\n                    ...filter.categories,\r\n                    {\r\n                      id: uuidv4(),\r\n                      name: 'new category',\r\n                      rules: [],\r\n                    },\r\n                  ],\r\n                });\r\n              }}\r\n            />\r\n            <div className=\"flex w-full\">\r\n              {category && (\r\n                <div className=\"flex w-full flex-col space-y-2 px-4 py-2\">\r\n                  {category.rules.map((rule) => (\r\n                    <Rule rule={rule} key={rule.id} />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport const Head = () => <Seo title=\"\" />;\r\n\r\nexport const query = graphql`\r\n  query ($version: String) {\r\n    allPoeMetadata(\r\n      filter: { game_version: { eq: $version } }\r\n      sort: { version: DESC }\r\n    ) {\r\n      nodes {\r\n        game_version\r\n        league\r\n        version\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nfunction FilterNotFound() {\r\n  return (\r\n    <Layout>\r\n      <div className=\"flex flex-col items-center space-y-6 pt-24\">\r\n        <div className=\"text-4xl\">Exile!</div>\r\n        <div className=\"text-3xl\">Your filter is in another browser!</div>\r\n        <div className=\"w-[38ch] whitespace-pre-wrap\">\r\n          ░░░░░░░░▄▄▄▀▀▀▄▄███▄░░░░░░░░░░░░░░ ░░░░░▄▀▀░░░░░░░▐░▀██▌░░░░░░░░░░░░░\r\n          ░░░▄▀░░░░▄▄███░▌▀▀░▀█░░░░░░░░░░░░░ ░░▄█░░▄▀▀▒▒▒▒▒▄▐░░░░█▌░░░░░░░░░░░░\r\n          ░▐█▀▄▀▄▄▄▄▀▀▀▀▌░░░░░▐█▄░░░░░░░░░░░ ░▌▄▄▀▀░░░░░░░░▌░░░░▄███████▄░░░░░░\r\n          ░░░░░░░░░░░░░▐░░░░▐███████████▄░░░ ░░░░░le░░░░░░░▐░░░░▐█████████████▄\r\n          ░░░░toucan░░░░░░▀▄░░░▐█████████████▄\r\n          ░░░░░░has░░░░░░░░▀▄▄███████████████ ░░░░░arrived░░░░░░░░░░░░█▀██████░░\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n"],"names":["Categories","categories","onSelected","onNewCategory","index","setIndex","useState","lastIndex","length","React","className","map","category","idx","key","id","onClick","clsx","name","IconButton","icon","text","Action","action","config","style","width","label","value","Condtion","condition","Rule","rule","expanded","setExpanded","maxWidthText","actions","conditions","reduce","max","Math","Condition","FilterPage","data","params","version","leagues","allPoeMetadata","nodes","v","league","saved","obtainFilter","FilterNotFound","filter","setFilter","game","gameVersion","uuidv4","lastUpdated","Date","description","setCategory","useEffect","console","log","Layout","Editable","onTextChange","Dropdown","rules","Head","Seo","title"],"sourceRoot":""}